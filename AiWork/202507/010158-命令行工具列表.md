# å‘½ä»¤è¡Œå·¥å…·è¯¦ç»†åˆ—è¡¨

## æ¦‚è¿°

PHP Version Manager Mirror é¡¹ç›®åŒ…å«ä¸¤å¥—å‘½ä»¤è¡Œå·¥å…·ï¼š
1. **åŸé¡¹ç›®å‘½ä»¤** - åŸºäºçº¯PHPå®ç°çš„15ä¸ªå‘½ä»¤å·¥å…·
2. **Laravelå‘½ä»¤** - åŸºäºLaravel Artisanå®ç°çš„4ä¸ªæ ¸å¿ƒå‘½ä»¤

## åŸé¡¹ç›®å‘½ä»¤å·¥å…· (15ä¸ª)

### æ ¸å¿ƒåŠŸèƒ½å‘½ä»¤

#### 1. sync - åŒæ­¥é•œåƒå†…å®¹
- **æ–‡ä»¶**: `src/Command/SyncCommand.php`
- **åŠŸèƒ½**: åŒæ­¥PHPæºç ã€PECLæ‰©å±•ã€GitHubæ‰©å±•ã€ComposeråŒ…
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror sync                    # åŒæ­¥æ‰€æœ‰å†…å®¹
  ./bin/pvm-mirror sync php                # ä»…åŒæ­¥PHPæºç 
  ./bin/pvm-mirror sync pecl               # ä»…åŒæ­¥PECLæ‰©å±•
  ./bin/pvm-mirror sync github             # ä»…åŒæ­¥GitHubæ‰©å±•
  ./bin/pvm-mirror sync composer           # ä»…åŒæ­¥ComposeråŒ…
  ```

#### 2. status - æ˜¾ç¤ºé•œåƒçŠ¶æ€
- **æ–‡ä»¶**: `src/Command/StatusCommand.php`
- **åŠŸèƒ½**: æ˜¾ç¤ºå„é•œåƒçš„æ–‡ä»¶æ•°é‡ã€å¤§å°ã€æœ€åæ›´æ–°æ—¶é—´ç­‰çŠ¶æ€ä¿¡æ¯
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror status                  # æ˜¾ç¤ºæ‰€æœ‰é•œåƒçŠ¶æ€
  ```

#### 3. server - æœåŠ¡å™¨ç®¡ç†
- **æ–‡ä»¶**: `src/Command/ServerCommand.php`
- **åŠŸèƒ½**: å¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€æŸ¥çœ‹HTTPæœåŠ¡å™¨çŠ¶æ€
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror server start           # å¯åŠ¨æœåŠ¡å™¨(é»˜è®¤8080ç«¯å£)
  ./bin/pvm-mirror server start 9000      # å¯åŠ¨æœåŠ¡å™¨(æŒ‡å®šç«¯å£)
  ./bin/pvm-mirror server start -f        # å‰å°å¯åŠ¨æœåŠ¡å™¨
  ./bin/pvm-mirror server stop            # åœæ­¢æœåŠ¡å™¨
  ./bin/pvm-mirror server restart         # é‡å¯æœåŠ¡å™¨
  ./bin/pvm-mirror server status          # æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€
  ```

#### 4. config - é…ç½®ç®¡ç†
- **æ–‡ä»¶**: `src/Command/ConfigCommand.php`
- **åŠŸèƒ½**: è·å–ã€è®¾ç½®ã€åˆ—å‡ºã€ç¼–è¾‘é…ç½®é¡¹
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror config get server.port         # è·å–é…ç½®é¡¹
  ./bin/pvm-mirror config set server.port 8080    # è®¾ç½®é…ç½®é¡¹
  ./bin/pvm-mirror config list runtime            # åˆ—å‡ºè¿è¡Œæ—¶é…ç½®
  ./bin/pvm-mirror config edit mirror             # ç¼–è¾‘é•œåƒé…ç½®æ–‡ä»¶
  ```

#### 5. clean - æ¸…ç†è¿‡æœŸæ–‡ä»¶
- **æ–‡ä»¶**: `src/Command/CleanCommand.php`
- **åŠŸèƒ½**: æ¸…ç†è¿‡æœŸçš„é•œåƒæ–‡ä»¶å’Œç¼“å­˜
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror clean                   # æ¸…ç†æ‰€æœ‰è¿‡æœŸæ–‡ä»¶
  ./bin/pvm-mirror clean --dry-run         # è¯•è¿è¡Œæ¨¡å¼
  ./bin/pvm-mirror clean --force           # å¼ºåˆ¶æ¸…ç†
  ```

### ç³»ç»Ÿç®¡ç†å‘½ä»¤

#### 6. cache - ç¼“å­˜ç®¡ç†
- **æ–‡ä»¶**: `src/Command/CacheCommand.php`
- **åŠŸèƒ½**: ç®¡ç†ç³»ç»Ÿç¼“å­˜ï¼ŒåŒ…æ‹¬æ¸…ç†ã€ç»Ÿè®¡ã€é…ç½®
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror cache status            # æŸ¥çœ‹ç¼“å­˜çŠ¶æ€
  ./bin/pvm-mirror cache clear             # æ¸…ç©ºç¼“å­˜
  ./bin/pvm-mirror cache stats             # æ˜¾ç¤ºç¼“å­˜ç»Ÿè®¡
  ```

#### 7. log - æ—¥å¿—ç®¡ç†
- **æ–‡ä»¶**: `src/Command/LogCommand.php`
- **åŠŸèƒ½**: æŸ¥çœ‹ã€æ¸…ç†ã€ç®¡ç†ç³»ç»Ÿæ—¥å¿—
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror log show                # æ˜¾ç¤ºæ—¥å¿—å†…å®¹
  ./bin/pvm-mirror log show --lines=100    # æ˜¾ç¤ºæŒ‡å®šè¡Œæ•°
  ./bin/pvm-mirror log clear               # æ¸…ç†è¿‡æœŸæ—¥å¿—
  ./bin/pvm-mirror log tail                # å®æ—¶æŸ¥çœ‹æ—¥å¿—
  ./bin/pvm-mirror log list                # åˆ—å‡ºæ‰€æœ‰æ—¥å¿—æ–‡ä»¶
  ```

#### 8. monitor - ç³»ç»Ÿç›‘æ§
- **æ–‡ä»¶**: `src/Command/MonitorCommand.php`
- **åŠŸèƒ½**: ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µå’Œæ€§èƒ½æŒ‡æ ‡
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror monitor                 # æ˜¾ç¤ºç³»ç»Ÿç›‘æ§ä¿¡æ¯
  ./bin/pvm-mirror monitor --watch         # æŒç»­ç›‘æ§æ¨¡å¼
  ```

#### 9. resource - èµ„æºç®¡ç†
- **æ–‡ä»¶**: `src/Command/ResourceCommand.php`
- **åŠŸèƒ½**: ç®¡ç†ç³»ç»Ÿèµ„æºï¼ŒåŒ…æ‹¬å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror resource status         # æ˜¾ç¤ºèµ„æºçŠ¶æ€
  ./bin/pvm-mirror resource cleanup        # æ¸…ç†èµ„æº
  ```

#### 10. security - å®‰å…¨è®¾ç½®
- **æ–‡ä»¶**: `src/Command/SecurityCommand.php`
- **åŠŸèƒ½**: ç®¡ç†è®¿é—®æ§åˆ¶ã€IPç™½åå•ã€ç”¨æˆ·è®¤è¯ç­‰å®‰å…¨è®¾ç½®
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror security status                    # æ˜¾ç¤ºå®‰å…¨è®¾ç½®çŠ¶æ€
  ./bin/pvm-mirror security enable                    # å¯ç”¨è®¿é—®æ§åˆ¶
  ./bin/pvm-mirror security whitelist add 192.168.1.0/24  # æ·»åŠ IPç™½åå•
  ./bin/pvm-mirror security auth add user pass        # æ·»åŠ ç”¨æˆ·è®¤è¯
  ./bin/pvm-mirror security log show                  # æ˜¾ç¤ºè®¿é—®æ—¥å¿—
  ```

### é«˜çº§åŠŸèƒ½å‘½ä»¤

#### 11. integrate - é›†æˆç®¡ç†
- **æ–‡ä»¶**: `src/Command/IntegrateCommand.php`
- **åŠŸèƒ½**: ä¸å¤–éƒ¨ç³»ç»Ÿé›†æˆï¼ŒåŒ…æ‹¬PVMä¸»é¡¹ç›®é›†æˆ
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror integrate status        # æ˜¾ç¤ºé›†æˆçŠ¶æ€
  ./bin/pvm-mirror integrate test          # æµ‹è¯•é›†æˆè¿æ¥
  ```

#### 12. discover - ç‰ˆæœ¬å‘ç°
- **æ–‡ä»¶**: `src/Command/DiscoverCommand.php`
- **åŠŸèƒ½**: è‡ªåŠ¨å‘ç°æ–°çš„PHPç‰ˆæœ¬ã€PECLæ‰©å±•ç‰ˆæœ¬ã€GitHubæ‰©å±•ç‰ˆæœ¬
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror discover                # å‘ç°æ‰€æœ‰ç‰ˆæœ¬
  ./bin/pvm-mirror discover php            # å‘ç°PHPç‰ˆæœ¬
  ./bin/pvm-mirror discover pecl           # å‘ç°æ‰€æœ‰PECLæ‰©å±•ç‰ˆæœ¬
  ./bin/pvm-mirror discover pecl redis     # å‘ç°æŒ‡å®šPECLæ‰©å±•ç‰ˆæœ¬
  ./bin/pvm-mirror discover github         # å‘ç°æ‰€æœ‰GitHubæ‰©å±•ç‰ˆæœ¬
  ./bin/pvm-mirror discover ext swoole     # å‘ç°æŒ‡å®šGitHubæ‰©å±•ç‰ˆæœ¬
  ```

#### 13. update-config - æ›´æ–°é…ç½®
- **æ–‡ä»¶**: `src/Command/UpdateConfigCommand.php`
- **åŠŸèƒ½**: æ ¹æ®å‘ç°çš„ç‰ˆæœ¬ä¿¡æ¯æ›´æ–°é…ç½®æ–‡ä»¶
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror update-config                    # æ›´æ–°æ‰€æœ‰ç‰ˆæœ¬é…ç½®
  ./bin/pvm-mirror update-config --dry-run          # è¯•è¿è¡Œæ¨¡å¼
  ./bin/pvm-mirror update-config php                # æ›´æ–°PHPç‰ˆæœ¬é…ç½®
  ./bin/pvm-mirror update-config pecl redis         # æ›´æ–°æŒ‡å®šPECLæ‰©å±•é…ç½®
  ```

#### 14. split-versions - ç‰ˆæœ¬åˆ†å‰²
- **æ–‡ä»¶**: `src/Command/SplitVersionsCommand.php`
- **åŠŸèƒ½**: å°†ç‰ˆæœ¬é…ç½®æŒ‰ä¸»ç‰ˆæœ¬åˆ†å‰²ï¼Œä¼˜åŒ–é…ç½®æ–‡ä»¶ç»“æ„
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror split-versions           # åˆ†å‰²ç‰ˆæœ¬é…ç½®
  ./bin/pvm-mirror split-versions --backup  # åˆ†å‰²å‰å¤‡ä»½
  ```

#### 15. help - å¸®åŠ©ä¿¡æ¯
- **æ–‡ä»¶**: `src/Command/HelpCommand.php`
- **åŠŸèƒ½**: æ˜¾ç¤ºå‘½ä»¤å¸®åŠ©ä¿¡æ¯å’Œä½¿ç”¨è¯´æ˜
- **ç”¨æ³•**: 
  ```bash
  ./bin/pvm-mirror help                     # æ˜¾ç¤ºæ‰€æœ‰å‘½ä»¤åˆ—è¡¨
  ./bin/pvm-mirror help <å‘½ä»¤å>            # æ˜¾ç¤ºç‰¹å®šå‘½ä»¤å¸®åŠ©
  ```

## Laravel Artisan å‘½ä»¤ (4ä¸ª)

### å·²è¿ç§»çš„æ ¸å¿ƒå‘½ä»¤

#### 1. mirror:sync - é•œåƒåŒæ­¥
- **æ–‡ä»¶**: `php-version-manager-mirror-laravel/app/Console/Commands/SyncCommand.php`
- **åŠŸèƒ½**: Laravelç‰ˆæœ¬çš„åŒæ­¥å‘½ä»¤ï¼Œé›†æˆé˜Ÿåˆ—ç³»ç»Ÿ
- **ç”¨æ³•**: 
  ```bash
  php artisan mirror:sync                   # åŒæ­¥æ‰€æœ‰é•œåƒ
  php artisan mirror:sync --type=php        # åŒæ­¥æŒ‡å®šç±»å‹
  php artisan mirror:sync --force           # å¼ºåˆ¶åŒæ­¥
  ```

#### 2. mirror:status - çŠ¶æ€æŸ¥çœ‹
- **æ–‡ä»¶**: `php-version-manager-mirror-laravel/app/Console/Commands/StatusCommand.php`
- **åŠŸèƒ½**: Laravelç‰ˆæœ¬çš„çŠ¶æ€æŸ¥çœ‹å‘½ä»¤
- **ç”¨æ³•**: 
  ```bash
  php artisan mirror:status                 # æ˜¾ç¤ºé•œåƒçŠ¶æ€
  php artisan mirror:status --json          # JSONæ ¼å¼è¾“å‡º
  ```

#### 3. mirror:clean - æ¸…ç†å‘½ä»¤
- **æ–‡ä»¶**: `php-version-manager-mirror-laravel/app/Console/Commands/CleanCommand.php`
- **åŠŸèƒ½**: Laravelç‰ˆæœ¬çš„æ¸…ç†å‘½ä»¤
- **ç”¨æ³•**: 
  ```bash
  php artisan mirror:clean                  # æ¸…ç†è¿‡æœŸæ–‡ä»¶
  php artisan mirror:clean --dry-run        # è¯•è¿è¡Œæ¨¡å¼
  ```

#### 4. mirror:config - é…ç½®ç®¡ç†
- **æ–‡ä»¶**: `php-version-manager-mirror-laravel/app/Console/Commands/ConfigCommand.php`
- **åŠŸèƒ½**: Laravelç‰ˆæœ¬çš„é…ç½®ç®¡ç†å‘½ä»¤
- **ç”¨æ³•**: 
  ```bash
  php artisan mirror:config list            # åˆ—å‡ºé…ç½®
  php artisan mirror:config get key         # è·å–é…ç½®é¡¹
  php artisan mirror:config set key value   # è®¾ç½®é…ç½®é¡¹
  ```

## å‘½ä»¤è¿ç§»çŠ¶æ€

### âœ… å·²å®Œæˆè¿ç§» (4/15)
- [x] sync â†’ mirror:sync
- [x] status â†’ mirror:status  
- [x] clean â†’ mirror:clean
- [x] config â†’ mirror:config

### â³ å¾…è¿ç§»å‘½ä»¤ (11/15)
- [ ] server â†’ mirror:server
- [ ] cache â†’ mirror:cache
- [ ] log â†’ mirror:log
- [ ] monitor â†’ mirror:monitor
- [ ] resource â†’ mirror:resource
- [ ] security â†’ mirror:security
- [ ] integrate â†’ mirror:integrate
- [ ] discover â†’ mirror:discover
- [ ] update-config â†’ mirror:update-config
- [ ] split-versions â†’ mirror:split-versions
- [ ] help â†’ (Laravelå†…ç½®help)

## å‘½ä»¤åˆ†ç±»å’Œä¼˜å…ˆçº§

### ğŸ”¥ é«˜ä¼˜å…ˆçº§ (æ ¸å¿ƒåŠŸèƒ½)
1. **sync** - åŒæ­¥åŠŸèƒ½ï¼Œé¡¹ç›®æ ¸å¿ƒ
2. **status** - çŠ¶æ€ç›‘æ§ï¼Œè¿ç»´å¿…éœ€
3. **server** - æœåŠ¡å™¨ç®¡ç†ï¼Œéƒ¨ç½²å¿…éœ€
4. **config** - é…ç½®ç®¡ç†ï¼Œç³»ç»ŸåŸºç¡€

### ğŸ”¶ ä¸­ä¼˜å…ˆçº§ (è¿ç»´ç®¡ç†)
5. **clean** - æ¸…ç†åŠŸèƒ½ï¼Œç»´æŠ¤å¿…éœ€
6. **cache** - ç¼“å­˜ç®¡ç†ï¼Œæ€§èƒ½ä¼˜åŒ–
7. **log** - æ—¥å¿—ç®¡ç†ï¼Œé—®é¢˜æ’æŸ¥
8. **monitor** - ç³»ç»Ÿç›‘æ§ï¼Œè¿ç»´å·¥å…·

### ğŸ”· ä½ä¼˜å…ˆçº§ (é«˜çº§åŠŸèƒ½)
9. **security** - å®‰å…¨ç®¡ç†ï¼Œå¯é€‰åŠŸèƒ½
10. **resource** - èµ„æºç®¡ç†ï¼Œä¼˜åŒ–å·¥å…·
11. **integrate** - é›†æˆç®¡ç†ï¼Œæ‰©å±•åŠŸèƒ½
12. **discover** - ç‰ˆæœ¬å‘ç°ï¼Œè‡ªåŠ¨åŒ–å·¥å…·
13. **update-config** - é…ç½®æ›´æ–°ï¼Œç»´æŠ¤å·¥å…·
14. **split-versions** - ç‰ˆæœ¬åˆ†å‰²ï¼Œä¼˜åŒ–å·¥å…·
15. **help** - å¸®åŠ©ä¿¡æ¯ï¼Œè¾…åŠ©åŠŸèƒ½

## è¿ç§»è®¡åˆ’

### é˜¶æ®µ4.2: RESTful APIå®ç° (å½“å‰)
- é‡ç‚¹å®ç°APIæ¥å£ï¼Œå‘½ä»¤è¡Œå·¥å…·æš‚æ—¶ä¿æŒç°çŠ¶

### é˜¶æ®µ4.3: å‘½ä»¤è¡Œå·¥å…·è¿ç§» (åç»­)
- æŒ‰ä¼˜å…ˆçº§é€æ­¥è¿ç§»å‰©ä½™11ä¸ªå‘½ä»¤
- ä¿æŒå‘½ä»¤æ¥å£å…¼å®¹æ€§
- é›†æˆLaravelé˜Ÿåˆ—ã€ç¼“å­˜ã€æ—¥å¿—ç³»ç»Ÿ

### å…¼å®¹æ€§ç­–ç•¥
- ä¿æŒåŸæœ‰å‘½ä»¤è¡Œæ¥å£ä¸å˜
- æ–°å¢Laravel Artisanå‘½ä»¤ä½œä¸ºè¡¥å……
- é€æ­¥è¿‡æ¸¡åˆ°Laravelå‘½ä»¤ä½“ç³»
